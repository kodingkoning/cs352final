<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>three.js Frogger</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
		<script src="https://threejs.org/examples/js/loaders/GLTFLoader.js"></script>
		<script src="models/car.js"></script>
		<script src="models/frog.js"></script>
		<script src="models/log.js"></script>
		<script>

		// initial background from example at https://threejs.org/examples/#webgl_animation_cloth

		var renderer, scene;
		var cube;

		function init() {
      scene = new THREE.Scene();
			scene.background = new THREE.Color( 0xcce0ff );
			scene.fog = new THREE.Fog( 0xcce0ff, 5000, 10000 );
			renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

			// camera
			camera = new THREE.PerspectiveCamera( 30, window.innerWidth / window.innerHeight, 1, 10000 );
			camera.position.set( 1000, 300, 1500 );
			// camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.25, 20 );
			// camera.position.set( - 1.8, 0.9, 2.7 );

			// lights
			scene.add( new THREE.AmbientLight( 0x666666 ) );
			var light = new THREE.DirectionalLight( 0xdfebff, 1 );
			light.position.set( 50, 200, 100 );
			light.position.multiplyScalar( 1.3 );
			light.castShadow = true;
			light.shadow.mapSize.width = 1024;
			light.shadow.mapSize.height = 1024;
			var d = 300;
			light.shadow.camera.left = - d;
			light.shadow.camera.right = d;
			light.shadow.camera.top = d;
			light.shadow.camera.bottom = - d;
			light.shadow.camera.far = 1000;
			scene.add( light );

			// ground
			var loader = new THREE.TextureLoader();
			var groundTexture = loader.load( 'images/grasslight-big.jpg' );
			groundTexture.wrapS = groundTexture.wrapT = THREE.RepeatWrapping;
			groundTexture.repeat.set( 25, 25 );
			groundTexture.anisotropy = 16;
			var groundMaterial = new THREE.MeshLambertMaterial( { map: groundTexture } );
			var mesh = new THREE.Mesh( new THREE.PlaneBufferGeometry( 20000, 20000 ), groundMaterial );
			mesh.position.y = 0;
			mesh.rotation.x = - Math.PI / 2;
			mesh.receiveShadow = true;
			scene.add( mesh );

			var car = new Car(scene, 500, 0, 0);
			var frog = new Frog(scene, 550, 0, 40);
			var log = new Log(scene, 450, 0, 20);

			// controls
			var controls = new THREE.OrbitControls( camera, renderer.domElement );
			controls.maxPolarAngle = Math.PI * 0.497;
			controls.minDistance = 1000;
			controls.maxDistance = 5000;

			window.addEventListener( 'resize', onWindowResize, false );
		}

		function onWindowResize() {
		  camera.aspect = window.innerWidth / window.innerHeight;
		  camera.updateProjectionMatrix();
		  renderer.setSize( window.innerWidth, window.innerHeight );
		}

		function animate() {
			requestAnimationFrame( animate );
			renderer.render( scene, camera );
		};

		init();
		animate();

		</script>
	</body>
</html>
